version: '3.8'

services:
  frontend-dev:
    image: node:24.3.0-alpine
    container_name: faari-frontend-dev
    working_dir: /app
    ports:
      - "3005:3000"
    volumes:
      - ./src:/app/src
      - ./public:/app/public
      - ./scripts:/app/scripts
      - ./package.json:/app/package.json
      - ./package-lock.json:/app/package-lock.json
      - ./.env.prod:/app/.env.prod
      # ✅ Add Tailwind and PostCSS config files
      - ./tailwind.config.js:/app/tailwind.config.js
      - ./postcss.config.js:/app/postcss.config.js
      # Use anonymous volume for node_modules to avoid conflicts
      - /app/node_modules
    environment:
      - CHOKIDAR_USEPOLLING=true
      - REACT_APP_API_BASE_URL=http://localhost:3002
      - REACT_APP_ENV=development
      - REACT_APP_APP_NAME=Fáàrí Fashion (Dev)
      - REACT_APP_PAYSTACK_PUBLIC_KEY=pk_live_9da64977c728a9fba082d8909e0604b487c4dc47
    command: sh -c "npm ci && npm run switch:designer && npm start"
    networks:
      - faari-network

networks:
  faari-network:
    driver: bridge